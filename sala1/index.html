<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sala 1 - Haizaldi</title>

<style>
body{
  margin:0;
  font-family: system-ui;
  background: linear-gradient(180deg, #2a0061, #12002a);
  color:#fff;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.wrap{ width:900px; text-align:center; }

a.back{
  color:#00ffcc;
  text-decoration:none;
  font-weight:600;
}

.panel{
  margin:20px auto;
  padding:20px;
  border-radius:15px;
  background:rgba(255,255,255,0.08);
}

input, select{
  padding:10px;
  border-radius:10px;
  border:none;
  margin:5px;
}

button{
  padding:10px 20px;
  border-radius:10px;
  border:none;
  background:#00ff88;
  font-weight:bold;
  cursor:pointer;
}

.instrumentos{
  display:flex;
  justify-content:center;
  gap:40px;
  margin-top:30px;
}

.instrumento{
  cursor:pointer;
}

.icono{
  width:110px;
  height:110px;
  background:rgba(255,255,255,0.1);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:50px;
  transition:0.2s;
}

.instrumento.seleccionado .icono{
  background:#00ff88;
  color:#000;
  transform:scale(1.1);
  box-shadow:0 0 20px #00ff88;
}

.estado{
  margin-top:15px;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="wrap">

<a class="back" href="../">‚Üê Volver</a>
<h1>Sala 1</h1>

<div class="panel">

<label>Fecha:</label>
<input type="date" id="fecha">

<label>Hora:</label>
<select id="hora"></select>

<button onclick="reservar()">Reservar</button>

<p id="estado" class="estado"></p>

</div>

<div class="instrumentos">

<div class="instrumento gaita" onclick="toggleInstrument(this)">
  <div class="icono">üéµ</div>
  <p>Gaita 1</p>
</div>

<div class="instrumento gaita" onclick="toggleInstrument(this)">
  <div class="icono">üéµ</div>
  <p>Gaita 2</p>
</div>

<div class="instrumento tambor" onclick="toggleInstrument(this)">
  <div class="icono">ü•Å</div>
  <p>Tambor</p>
</div>

</div>

</div>

<script>

// limitar fecha m√≠nima a hoy
document.getElementById("fecha").min = new Date().toISOString().split("T")[0];

// generar horas 16:00 - 21:00 cada 30 min
const horaSelect = document.getElementById("hora");
for(let h=16; h<=20; h++){
  ["00","30"].forEach(m=>{
    let option = document.createElement("option");
    option.value = h+":"+m;
    option.text = h+":"+m;
    horaSelect.appendChild(option);
  });
}

function toggleInstrument(el){
  const tipo = el.classList.contains("gaita") ? "gaita" : "tambor";

  const gaitas = document.querySelectorAll(".gaita.seleccionado").length;
  const tambor = document.querySelectorAll(".tambor.seleccionado").length;

  if(el.classList.contains("seleccionado")){
    el.classList.remove("seleccionado");
    return;
  }

  if(tipo==="gaita" && gaitas>=2){
    alert("M√°ximo 2 gaitas");
    return;
  }

  if(tipo==="tambor" && tambor>=1){
    alert("Solo 1 tambor");
    return;
  }

  el.classList.add("seleccionado");
}

function reservar(){

  const fecha = document.getElementById("fecha").value;
  const hora = document.getElementById("hora").value;

  const gaitas = document.querySelectorAll(".gaita.seleccionado").length;
  const tambor = document.querySelectorAll(".tambor.seleccionado").length;

  if(!fecha || !hora){
    document.getElementById("estado").innerText="Selecciona fecha y hora";
    return;
  }

  if(gaitas===0 && tambor===0){
    document.getElementById("estado").innerText="Selecciona instrumento";
    return;
  }

  const clave = "Sala1-"+fecha+"-"+hora;

  if(localStorage.getItem(clave)){
    document.getElementById("estado").innerText="‚ùå Ya est√° reservada esa hora";
    return;
  }

  localStorage.setItem(clave,"reservado");

  document.getElementById("estado").innerText=
    "‚úÖ Reserva confirmada para "+fecha+" a las "+hora;
}

</script>

</body>
</html>
